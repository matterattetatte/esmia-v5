---
layout: layouts/base.njk
---

<style>{% include "css/news.css" %}</style>

<article class="post">
 {% if image %}
  <figure class="post-hero">
    <img src="{{ image }}" alt="{{ image_alt or title }}">
    {% if image_caption %}
      <figcaption>{{ image_caption }}</figcaption>
    {% endif %}
  </figure>
{% endif %}

  <h1 class="post-title">{{ title }}</h1>

  {# ---- Muted metadata row ---- #}
  <ul class="post-metadata">
    {% if author %}<li><strong>Author:</strong>&nbsp;{{ author }}</li>{% endif %}

    {% if category %}
      <li>•</li>
      <li><strong>Category:</strong>&nbsp;
        <a href="/categories/{{ category | lower | replace(' ', '-') }}/">{{ category }}</a>
      </li>
    {% endif %}

    {% if tags and tags.length %}
      <li>•</li>
      <li><strong>Tags:</strong></li>
      {% for tag in tags %}
        {# build a simple slug without a custom filter #}
        {% set tagSlug = tag | lower | replace(' ', '-') %}
        <li><a class="post-tag" href="/tags/{{ tagSlug }}/">#{{ tag }}</a>{% if not loop.last %}{% endif %}</li>
      {% endfor %}
    {% endif %}

    {% if page.date %}
      <li>•</li>
      <li>
        <strong>Date:</strong>&nbsp;
        <time datetime="{{ page.date | htmlDateString }}">{{ page.date | readableDate }}</time>
      </li>
    {% endif %}
  </ul>

  {# ---- Social share row (text links, zero JS) ---- #}
  {% set shareUrl = canonical or ('https://Esmia.com' ~ page.url) %}
  <ul class="post-share" aria-label="Share article">
    <li><a href="https://www.linkedin.com/shareArticle?mini=true&url={{ shareUrl | urlencode }}&title={{ title | urlencode }}" target="_blank" rel="noopener">LinkedIn</a></li>
    <li>•</li>
    <li><a href="https://twitter.com/intent/tweet?url={{ shareUrl | urlencode }}&text={{ title | urlencode }}" target="_blank" rel="noopener">X</a></li>
    <li>•</li>
    <li><a href="mailto:?subject={{ title | urlencode }}&body={{ shareUrl | urlencode }}">Email</a></li>
  </ul>

  {{ content | safe }}

  {# ---- Prev/Next: left as your project expects (no args) ---- #}
  {% if collections.posts %}
    {% set previousPost = collections.posts | getPreviousCollectionItem %}
    {% set nextPost = collections.posts | getNextCollectionItem %}
    {% if nextPost or previousPost %}
      <ul class="links-nextprev">
        {% if previousPost %}<li class="links-nextprev-prev">← Previous<br> <a href="{{ previousPost.url }}">{{ previousPost.data.title }}</a></li>{% endif %}
        {% if nextPost %}<li class="links-nextprev-next">Next →<br><a href="{{ nextPost.url }}">{{ nextPost.data.title }}</a></li>{% endif %}
      </ul>
    {% endif %}
  {% endif %}
</article>